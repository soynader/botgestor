(function (_0x21268c, _0x3a97a3) { const _0x363b92 = _0x4c59, _0x2eb4b3 = _0x21268c(); while (!![]) { try { const _0x325a90 = -parseInt(_0x363b92(0x185)) / 0x1 + parseInt(_0x363b92(0x19a)) / 0x2 + -parseInt(_0x363b92(0x172)) / 0x3 + parseInt(_0x363b92(0x188)) / 0x4 * (parseInt(_0x363b92(0x153)) / 0x5) + parseInt(_0x363b92(0x17c)) / 0x6 + parseInt(_0x363b92(0x155)) / 0x7 * (parseInt(_0x363b92(0x161)) / 0x8) + -parseInt(_0x363b92(0x17d)) / 0x9 * (-parseInt(_0x363b92(0x180)) / 0xa); if (_0x325a90 === _0x3a97a3) break; else _0x2eb4b3['push'](_0x2eb4b3['shift']()); } catch (_0x26b1a0) { _0x2eb4b3['push'](_0x2eb4b3['shift']()); } } }(_0x480d, 0xc096b)); import _0x3ab1b9 from '../database/dbpromise.js'; import _0x4412df from 'fs'; function _0x480d() { const _0x149a38 = ['parse', 'SELECT\x20*\x20FROM\x20payment_gateways\x20WHERE\x20active\x20=\x20?', '/languages/', 'app_name', 'unlink', '633830jXZuxJ', '941695QefhSu', 'UPDATE\x20web\x20SET\x20app_name\x20=\x20?,\x20youtube_video\x20=\x20?,\x20meta\x20=\x20?,\x20currency_symbol\x20=\x20?,\x20exchange_rate\x20=\x20?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20smtp_host\x20=\x20?,smtp_port\x20=\x20?,smtp_email\x20=\x20?,smtp_pass\x20=\x20?\x20\x20', '6385526FWpqcE', '/client/public.zip', 'cwd', 'filter', 'payment_id', 'existsSync', 'DBPASS', 'Destination\x20file\x20already\x20exists', 'code', 'unlinkSync', 'env', 'newcode', '8rGsxmr', 'meta', 'json', 'smtp_pass', 'hit', 'updatedjson', 'Languages\x20updated\x20refresh\x20the\x20page\x20to\x20make\x20effects', 'random', 'utf8', 'join', 'now', 'endsWith', 'length', 'currency_symbol', 'Language\x20file\x20duplicated\x20successfully', 'DBUSER', 'https://verify-whatsham.oneoftheprojects.com/api/whatsham/download_whatsham?token=', '2915820HWkvgf', 'files', 'Language\x20file\x20deleted\x20successfully', 'body', 'SELECT\x20*\x20FROM\x20payment_gateways', 'File\x20duplication\x20failed:', 'You\x20cannot\x20delete\x20all\x20languages', 'file', '.json', 'log', '6261366UmTWKg', '1623393HEZDkf', 'File\x20write\x20failed:', 'smtp_port', '40CwrAzN', 'Settings\x20was\x20updated', 'exchange_rate', '/client/public/db/whatsham_install.sql', 'youtube_video', '1421758WauFDc', 'Server\x20error', 'SELECT\x20*\x20FROM\x20web', '4DiQGrc', 'Error\x20reading\x20folder:', '/client/public/', 'stringify', 'name', 'server\x20error', 'smtp_email', 'substring', 'File\x20deletion\x20failed:', 'query', '/client/public', 'readdir', 'smtp_host']; _0x480d = function () { return _0x149a38; }; return _0x480d(); } import _0xb571ba from 'path'; import _0xb6f3ec from 'mysql-import'; import _0x5b819e from 'node-fetch'; function _0x4c59(_0x38cbe1, _0x1b31ea) { const _0x480d48 = _0x480d(); return _0x4c59 = function (_0x4c5929, _0x5e2ed4) { _0x4c5929 = _0x4c5929 - 0x153; let _0x13c717 = _0x480d48[_0x4c5929]; return _0x13c717; }, _0x4c59(_0x38cbe1, _0x1b31ea); } import { createWriteStream } from 'fs'; import { pipeline } from 'stream/promises'; import _0x32d93c from 'extract-zip'; const getAllPayments = async (_0x28be3c, _0x3448c3) => { const _0x194304 = _0x4c59; try { const _0x5bccf6 = await _0x3ab1b9(_0x194304(0x196), [0x1]); _0x3448c3[_0x194304(0x163)]({ 'data': _0x5bccf6, 'success': !![] }); } catch (_0x4adade) { _0x3448c3[_0x194304(0x163)]({ 'err': _0x4adade, 'msg': 'server\x20error' }), console[_0x194304(0x17b)](_0x4adade); } }, getAllPaymentsAdmin = async (_0x11b30c, _0x31a46a) => { const _0x3753cb = _0x4c59; try { const _0x5155fc = await _0x3ab1b9(_0x3753cb(0x176), []); _0x31a46a[_0x3753cb(0x163)]({ 'data': _0x5155fc, 'success': !![] }); } catch (_0x18168c) { _0x31a46a[_0x3753cb(0x163)]({ 'err': _0x18168c, 'msg': _0x3753cb(0x18d) }), console['log'](_0x18168c); } }, getWebPublic = async (_0x32fc02, _0x1d37a4) => { const _0x3b3d8d = _0x4c59; try { const _0x3aa77e = await _0x3ab1b9(_0x3b3d8d(0x187), []); _0x1d37a4[_0x3b3d8d(0x163)]({ 'data': _0x3aa77e[0x0], 'success': !![] }); } catch (_0x1a8314) { _0x1d37a4[_0x3b3d8d(0x163)]({ 'err': _0x1a8314, 'msg': _0x3b3d8d(0x18d) }), console['log'](_0x1a8314); } }, updatePayment = async (_0x583845, _0x36a944) => { const _0x4d8d41 = _0x4c59; try { await _0x3ab1b9('UPDATE\x20payment_gateways\x20SET\x20active\x20=\x20?,\x20payment_id\x20=\x20?,\x20payment_keys\x20=\x20?\x20WHERE\x20code\x20=\x20?\x20', [_0x583845['body']['active'], _0x583845[_0x4d8d41(0x175)][_0x4d8d41(0x159)], _0x583845[_0x4d8d41(0x175)]['payment_keys'], _0x583845['body'][_0x4d8d41(0x15d)]]), _0x36a944[_0x4d8d41(0x163)]({ 'msg': 'Method\x20was\x20updated', 'success': !![] }); } catch (_0xafff9a) { _0x36a944[_0x4d8d41(0x163)]({ 'err': _0xafff9a, 'msg': _0x4d8d41(0x18d) }), console['log'](_0xafff9a); } }, getOneLang = async (_0x302e40, _0x5b7207) => { const _0x4651ff = _0x4c59; try { console[_0x4651ff(0x17b)](_0x302e40[_0x4651ff(0x191)]); const _0x2ae358 = process[_0x4651ff(0x157)](), _0x3df834 = _0x302e40[_0x4651ff(0x191)][_0x4651ff(0x15d)]; _0x4412df['readFile'](_0x2ae358 + _0x4651ff(0x197) + _0x3df834 + _0x4651ff(0x17a), _0x4651ff(0x169), (_0x227cbe, _0x5e733f) => { const _0x111c19 = _0x4651ff; if (_0x227cbe) { console['log']('File\x20read\x20failed:', _0x227cbe), _0x5b7207['json']({ 'notfound': !![] }); return; } _0x5b7207[_0x111c19(0x163)]({ 'success': !![], 'data': JSON[_0x111c19(0x195)](_0x5e733f) }); }); } catch (_0x3ca9af) { _0x5b7207[_0x4651ff(0x163)]({ 'err': _0x3ca9af, 'msg': 'server\x20error' }), console['log'](_0x3ca9af); } }, getAllLangName = async (_0x9580ec, _0x1f9e90) => { const _0x4b83b3 = _0x4c59; try { const _0x2d6b5b = process[_0x4b83b3(0x157)](); _0x4412df[_0x4b83b3(0x193)](_0x2d6b5b + _0x4b83b3(0x197), (_0x36aaa1, _0x4e5fdf) => { const _0x4c2192 = _0x4b83b3; _0x1f9e90[_0x4c2192(0x163)]({ 'success': !![], 'data': _0x4e5fdf }); }); } catch (_0x2cec5f) { _0x1f9e90['json']({ 'msg': _0x4b83b3(0x186), 'err': _0x2cec5f }), console[_0x4b83b3(0x17b)](_0x2cec5f); } }, updateLanguage = async (_0x3e2b8f, _0x32b3aa) => { const _0x3c82a0 = _0x4c59; try { console[_0x3c82a0(0x17b)](_0x3c82a0(0x165)); const _0x5dc665 = process['cwd'](), _0x272aae = _0x3e2b8f['body'][_0x3c82a0(0x15d)], _0x4315f1 = _0x3e2b8f[_0x3c82a0(0x175)][_0x3c82a0(0x166)], _0x5a2e25 = _0xb571ba[_0x3c82a0(0x16a)](_0x5dc665, 'languages', _0x272aae + _0x3c82a0(0x17a)); _0x4412df['writeFile'](_0x5a2e25, JSON[_0x3c82a0(0x18b)](_0x4315f1), _0x3c82a0(0x169), _0x10489d => { const _0x1ebe3d = _0x3c82a0; if (_0x10489d) { console[_0x1ebe3d(0x17b)](_0x1ebe3d(0x17e), _0x10489d), _0x32b3aa[_0x1ebe3d(0x163)]({ 'success': ![], 'error': _0x10489d }); return; } _0x32b3aa[_0x1ebe3d(0x163)]({ 'success': !![], 'msg': _0x1ebe3d(0x167) }); }); } catch (_0x41ba71) { _0x32b3aa['json']({ 'success': ![], 'error': _0x41ba71, 'msg': _0x3c82a0(0x186) }), console[_0x3c82a0(0x17b)](_0x41ba71); } }, deleteLanguage = async (_0x3fd48f, _0x291b4a) => { const _0x27161a = _0x4c59; try { const _0x1ca005 = process[_0x27161a(0x157)](), _0x17d580 = _0x3fd48f[_0x27161a(0x175)][_0x27161a(0x15d)], _0x3fe5cd = _0xb571ba[_0x27161a(0x16a)](_0x1ca005, 'languages'), _0x52ea3f = _0xb571ba['join'](_0x3fe5cd, _0x17d580 + '.json'); _0x4412df[_0x27161a(0x193)](_0x3fe5cd, (_0x2c1a52, _0x3d6ea3) => { const _0x4a41ed = _0x27161a; if (_0x2c1a52) { console[_0x4a41ed(0x17b)](_0x4a41ed(0x189), _0x2c1a52), _0x291b4a['json']({ 'success': ![], 'error': _0x2c1a52 }); return; } const _0x41712e = _0x3d6ea3[_0x4a41ed(0x158)](_0x565e4d => _0x565e4d['endsWith'](_0x4a41ed(0x17a))); if (_0x41712e[_0x4a41ed(0x16d)] === 0x1) { _0x291b4a[_0x4a41ed(0x163)]({ 'success': ![], 'msg': _0x4a41ed(0x178) }); return; } _0x4412df[_0x4a41ed(0x199)](_0x52ea3f, _0x46b038 => { const _0x29c8c5 = _0x4a41ed; if (_0x46b038) { console[_0x29c8c5(0x17b)](_0x29c8c5(0x190), _0x46b038), _0x291b4a[_0x29c8c5(0x163)]({ 'success': ![], 'error': _0x46b038 }); return; } _0x291b4a[_0x29c8c5(0x163)]({ 'success': !![], 'msg': _0x29c8c5(0x174) }); }); }); } catch (_0x4c2fa1) { _0x291b4a[_0x27161a(0x163)]({ 'success': ![], 'error': _0x4c2fa1, 'msg': _0x27161a(0x186) }), console[_0x27161a(0x17b)](_0x4c2fa1); } }, duplicateRandomLanguage = async (_0x397980, _0x1d75ae) => { const _0x49a39d = _0x4c59; try { const _0x1ff5d1 = process[_0x49a39d(0x157)](), _0x22156f = _0x397980[_0x49a39d(0x175)][_0x49a39d(0x160)], _0x4419b6 = _0xb571ba['join'](_0x1ff5d1, 'languages'); _0x4412df[_0x49a39d(0x193)](_0x4419b6, (_0x5d94e5, _0x1948dd) => { const _0x2bd69f = _0x49a39d; if (_0x5d94e5) { console[_0x2bd69f(0x17b)](_0x2bd69f(0x189), _0x5d94e5), _0x1d75ae[_0x2bd69f(0x163)]({ 'success': ![], 'error': _0x5d94e5 }); return; } const _0x3110f1 = _0x1948dd[_0x2bd69f(0x158)](_0x11c689 => _0x11c689[_0x2bd69f(0x16c)](_0x2bd69f(0x17a))), _0x3d8e10 = Math['floor'](Math[_0x2bd69f(0x168)]() * _0x3110f1[_0x2bd69f(0x16d)]), _0x1a6748 = _0x3110f1[_0x3d8e10], _0x53f61e = _0xb571ba['join'](_0x4419b6, _0x1a6748), _0x58dc24 = _0xb571ba['join'](_0x4419b6, _0x22156f + _0x2bd69f(0x17a)); if (_0x4412df[_0x2bd69f(0x15a)](_0x58dc24)) { _0x1d75ae[_0x2bd69f(0x163)]({ 'success': ![], 'msg': _0x2bd69f(0x15c) }); return; } _0x4412df['copyFile'](_0x53f61e, _0x58dc24, _0x2d9bba => { const _0x8427b8 = _0x2bd69f; if (_0x2d9bba) { console[_0x8427b8(0x17b)](_0x8427b8(0x177), _0x2d9bba), _0x1d75ae[_0x8427b8(0x163)]({ 'success': ![], 'error': _0x2d9bba }); return; } _0x1d75ae['json']({ 'success': !![], 'msg': _0x8427b8(0x16f) }); }); }); } catch (_0x5c9adc) { _0x1d75ae[_0x49a39d(0x163)]({ 'success': ![], 'error': _0x5c9adc, 'msg': _0x49a39d(0x186) }), console[_0x49a39d(0x17b)](_0x5c9adc); } }, updateAppConfig = async (_0x2f6538, _0x22568d) => { const _0x6e15fd = _0x4c59; try { console[_0x6e15fd(0x17b)](_0x2f6538['body'][_0x6e15fd(0x184)]); if (_0x2f6538[_0x6e15fd(0x173)]) { if (_0x2f6538['files'][_0x6e15fd(0x179)] !== undefined) { const _0x193de0 = _0x2f6538[_0x6e15fd(0x173)][_0x6e15fd(0x179)], _0x524609 = ('' + Math[_0x6e15fd(0x168)]())[_0x6e15fd(0x18f)](0x2, 0x7) + Date[_0x6e15fd(0x16b)]() + _0x193de0[_0x6e15fd(0x18c)], _0x4dd493 = process[_0x6e15fd(0x157)](); _0x193de0['mv'](_0x4dd493 + '/client/public/images/' + _0x524609, _0x5c2f6c => { if (_0x5c2f6c) return console['log'](_0x5c2f6c), _0x22568d['json']({ 'err': _0x5c2f6c }); }), await _0x3ab1b9('UPDATE\x20web\x20SET\x20app_name\x20=\x20?,\x20youtube_video\x20=\x20?,\x20meta\x20=\x20?,\x20currency_symbol\x20=\x20?,\x20exchange_rate\x20=\x20?,\x20logo\x20=\x20?,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20smtp_host\x20=\x20?,smtp_port\x20=\x20?,smtp_email\x20=\x20?,smtp_pass\x20=\x20?\x20', [_0x2f6538[_0x6e15fd(0x175)][_0x6e15fd(0x198)], _0x2f6538[_0x6e15fd(0x175)][_0x6e15fd(0x184)], _0x2f6538['body']['meta'], _0x2f6538[_0x6e15fd(0x175)][_0x6e15fd(0x16e)], _0x2f6538[_0x6e15fd(0x175)][_0x6e15fd(0x182)], _0x524609, _0x2f6538[_0x6e15fd(0x175)]['smtp_host'], _0x2f6538[_0x6e15fd(0x175)][_0x6e15fd(0x17f)], _0x2f6538[_0x6e15fd(0x175)]['smtp_email'], _0x2f6538['body'][_0x6e15fd(0x164)]]), _0x22568d[_0x6e15fd(0x163)]({ 'success': !![], 'msg': _0x6e15fd(0x181) }); } } else await _0x3ab1b9(_0x6e15fd(0x154), [_0x2f6538[_0x6e15fd(0x175)][_0x6e15fd(0x198)], _0x2f6538[_0x6e15fd(0x175)][_0x6e15fd(0x184)], _0x2f6538['body'][_0x6e15fd(0x162)], _0x2f6538['body'][_0x6e15fd(0x16e)], _0x2f6538[_0x6e15fd(0x175)][_0x6e15fd(0x182)], _0x2f6538[_0x6e15fd(0x175)][_0x6e15fd(0x194)], _0x2f6538[_0x6e15fd(0x175)][_0x6e15fd(0x17f)], _0x2f6538[_0x6e15fd(0x175)][_0x6e15fd(0x18e)], _0x2f6538[_0x6e15fd(0x175)]['smtp_pass']]), _0x22568d[_0x6e15fd(0x163)]({ 'success': !![], 'msg': _0x6e15fd(0x181) }); } catch (_0x3e424e) { _0x22568d['json']({ 'success': ![], 'error': _0x3e424e, 'msg': 'Server\x20error' }), console['log'](_0x3e424e); } }, installApp = async (_0x2cdb56, _0x484428) => { const _0x59d487 = _0x4c59; try { const _0x29f952 = _0x59d487(0x171) + _0x2cdb56[_0x59d487(0x175)]['token'], _0x316413 = async (_0x13885a, _0xdb96bd) => pipeline((await _0x5b819e(_0x13885a))[_0x59d487(0x175)], createWriteStream(_0xdb96bd)), _0x3983e5 = process[_0x59d487(0x157)](); await _0x316413(_0x29f952, _0x3983e5 + '/client/public.zip'), await _0x32d93c(_0x3983e5 + '/client/public.zip', { 'dir': _0x3983e5 + _0x59d487(0x18a) }), _0x4412df[_0x59d487(0x15e)](_0x3983e5 + _0x59d487(0x156)); const _0x84e7ef = new _0xb6f3ec({ 'host': process['env']['DBHOST'], 'user': process[_0x59d487(0x15f)][_0x59d487(0x170)], 'password': process[_0x59d487(0x15f)][_0x59d487(0x15b)], 'database': process[_0x59d487(0x15f)]['DBNAME'] }); await _0x84e7ef['import'](_0x3983e5 + _0x59d487(0x183)), _0x484428['json']({ 'success': !![] }); } catch (_0x326b30) { console[_0x59d487(0x17b)](_0x326b30), _0x484428[_0x59d487(0x163)]({ 'success': ![] }); } }, checkApp = async (_0x38a344, _0xc6349f) => { const _0xe09790 = _0x4c59; try { function _0x3e96b7(_0x3ac839) { return new Promise(_0x1bce93 => { const _0x456df5 = _0x4c59; _0x4412df[_0x456df5(0x15a)](_0x3ac839) ? _0x1bce93(!![]) : _0x1bce93(![]); }); } const _0x5c072c = process[_0xe09790(0x157)](), _0x2f69a1 = await _0x3e96b7(_0x5c072c + _0xe09790(0x192)); _0xc6349f['status'](0xc8)[_0xe09790(0x163)]({ 'install': !![], 'install_status': _0x2f69a1 ? !![] : ![] }); } catch (_0x347eac) { console[_0xe09790(0x17b)](_0x347eac), _0xc6349f[_0xe09790(0x163)]({ 'success': ![], 'msg': 'server\x20error', 'err': _0x347eac }); } }; export { getAllPayments, installApp, checkApp, updatePayment, updateAppConfig, deleteLanguage, duplicateRandomLanguage, updateLanguage, getAllLangName, getOneLang, getWebPublic, getAllPaymentsAdmin };